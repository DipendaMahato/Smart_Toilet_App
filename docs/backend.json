{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile, containing personal and medical information.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserProfile entity."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "name": {
          "type": "string",
          "description": "User's full name."
        },
        "photoURL": {
          "type": "string",
          "description": "URL of the user's profile picture.",
          "format": "uri"
        },
        "phoneNumber": {
          "type": "string",
          "description": "User's phone number."
        },
        "gender": {
          "type": "string",
          "description": "User's gender."
        },
        "bloodGroup": {
          "type": "string",
          "description": "User's blood group."
        },
        "height": {
          "type": "number",
          "description": "User's height in centimeters."
        },
        "weight": {
          "type": "number",
          "description": "User's weight in kilograms."
        },
        "dateOfBirth": {
          "type": "string",
          "description": "User's date of birth.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "email",
        "name"
      ]
    },
    "HealthInsight": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "HealthInsight",
      "type": "object",
      "description": "Represents a health insight generated by AI analysis of user data.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the HealthInsight entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N HealthInsight)"
        },
        "insightText": {
          "type": "string",
          "description": "The text content of the health insight."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the health insight was generated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "insightText",
        "timestamp"
      ]
    },
    "SensorData": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SensorData",
      "type": "object",
      "description": "Represents data collected from the smart toilet sensors.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the SensorData entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N SensorData)"
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the sensor data was recorded.",
          "format": "date-time"
        },
        "biomarker1": {
          "type": "number",
          "description": "Value of biomarker 1 (e.g., glucose level)."
        },
        "biomarker2": {
          "type": "number",
          "description": "Value of biomarker 2 (e.g., pH level)."
        }
      },
      "required": [
        "id",
        "userId",
        "timestamp",
        "biomarker1",
        "biomarker2"
      ]
    },
    "EmergencyAlert": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "EmergencyAlert",
      "type": "object",
      "description": "Represents an emergency alert triggered by health data analysis.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the EmergencyAlert entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N EmergencyAlert)"
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the alert was triggered.",
          "format": "date-time"
        },
        "alertMessage": {
          "type": "string",
          "description": "The message content of the emergency alert."
        }
      },
      "required": [
        "id",
        "userId",
        "timestamp",
        "alertMessage"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/UserProfile"
      },
      "description": "Stores user profile information. The path ensures that only the authenticated user can access their profile data."
    },
    "/users/{userId}/healthInsights/{healthInsightId}": {
      "schema": {
        "$ref": "#/entities/HealthInsight"
      },
      "description": "Stores health insights generated for a specific user. Includes denormalized 'userId' field for authorization independence."
    },
    "/users/{userId}/sensorData/{sensorDataId}": {
      "schema": {
        "$ref": "#/entities/SensorData"
      },
      "description": "Stores sensor data collected from the smart toilet for a specific user. Includes denormalized 'userId' field for authorization independence."
    },
    "/users/{userId}/emergencyAlerts/{emergencyAlertId}": {
      "schema": {
        "$ref": "#/entities/EmergencyAlert"
      },
      "description": "Stores emergency alerts triggered for a specific user. Includes denormalized 'userId' field for authorization independence."
    }
  }
}
